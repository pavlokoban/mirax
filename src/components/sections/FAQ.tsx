'use client'

import { useState } from 'react'
import Script from 'next/script'

const faqItems = [
  {
    q: 'Что такое сайт, оптимизированный под ИИ, и чем он отличается от SEO?',
    a: 'Сайт, оптимизированный под ИИ, создаётся с учётом того, как ChatGPT, Яндекс Алиса и Gemini анализируют и рекомендуют источники. В отличие от классического SEO, здесь важна структура знаний, экспертность, логика ответов и сущности, а не только ключевые слова.',
  },
  {
    q: 'Как продвигать сайт в ChatGPT и Яндекс Алисе в Москве?',
    a: 'Продвижение в ChatGPT и Алисе начинается с правильной архитектуры сайта, экспертного контента и микроразметки. Для Москвы дополнительно учитываются региональные факторы Яндекса, локальные запросы и коммерческие сигналы.',
  },
  {
    q: 'Может ли ChatGPT рекомендовать мой сайт как источник?',
    a: 'Да, если сайт структурирован как экспертный ресурс: с чёткими ответами, логикой, подтверждённой экспертизой и корректной разметкой. ИИ чаще использует сайты, которые понятно объясняют тему и закрывают пользовательский вопрос.',
  },
  {
    q: 'Работает ли ИИ-оптимизация для бизнеса в Москве?',
    a: 'Да. Для Москвы особенно важно сочетание AIO и SEO под Яндекс: локальная семантика, коммерческие факторы, структура услуг и доверие к бренду. Это повышает вероятность рекомендаций в ИИ и видимость в Яндексе.',
  },
  {
    q: 'Нужно ли делать новый сайт или можно адаптировать существующий?',
    a: 'В большинстве случаев можно адаптировать существующий сайт: переработать структуру, контент, микроразметку и экспертные блоки. Новый сайт нужен, если текущий технически или логически устарел.',
  },
  {
    q: 'Как ИИ понимает, что сайт экспертный?',
    a: 'ИИ анализирует структуру контента, глубину ответов, наличие авторства, логичность разделов, отсутствие противоречий и поведенческие сигналы. Это соответствует принципам E-E-A-T: опыт, экспертиза, авторитетность и доверие.',
  },
  {
    q: 'Подходит ли WordPress для ИИ-оптимизации?',
    a: 'Да. WordPress отлично подходит для ИИ-оптимизации при условии чистого кода, правильной структуры, использования микроразметки и отсутствия перегруженных тем и плагинов.',
  },
  {
    q: 'Сколько времени занимает продвижение сайта под ИИ?',
    a: 'Первые эффекты возможны уже после корректной переработки структуры и контента. Устойчивый результат формируется постепенно, по мере того как ИИ начинает воспринимать сайт как надёжный источник.',
  },
  {
    q: 'Можно ли продвигать интернет-магазин под ИИ в Москве?',
    a: 'Да. Для интернет-магазинов важны экспертные категории, поясняющий контент, структура товаров и ответы на вопросы пользователей. Это повышает видимость как в ИИ, так и в Яндексе.',
  },
]

export default function FAQ() {
  const [openIndex, setOpenIndex] = useState<number | null>(null)

  return (
    <section className="w-full py-28">
      <div className="max-w-5xl mx-auto px-6">

        <h2 className="text-4xl md:text-5xl font-bold mb-16">
          Часто задаваемые вопросы
        </h2>

        <div className="divide-y divide-black/10">
          {faqItems.map((item, index) => (
            <div key={index} className="py-6">
              <button
                onClick={() => setOpenIndex(openIndex === index ? null : index)}
                className="w-full flex items-center justify-between text-left"
              >
                <span className="text-lg font-medium max-w-4xl">
                  {item.q}
                </span>
                <span className="text-2xl">
                  {openIndex === index ? '–' : '+'}
                </span>
              </button>

              {openIndex === index && (
                <div className="mt-4 text-base opacity-80 max-w-4xl">
                  {item.a}
                </div>
              )}
            </div>
          ))}
        </div>
      </div>

      {/* SCHEMA.ORG FAQ */}
      <Script
        id="faq-schema"
        type="application/ld+json"
        strategy="afterInteractive"
        dangerouslySetInnerHTML={{
          __html: JSON.stringify({
            '@context': 'https://schema.org',
            '@type': 'FAQPage',
            'mainEntity': faqItems.map((item) => ({
              '@type': 'Question',
              'name': item.q,
              'acceptedAnswer': {
                '@type': 'Answer',
                'text': item.a,
              },
            })),
          }),
        }}
      />
    </section>
  )
}
